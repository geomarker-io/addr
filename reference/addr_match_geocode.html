<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Geocode addr vectors — addr_match_geocode • addr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Geocode addr vectors — addr_match_geocode"><meta name="description" content="Addresses are attempted to be matched to reference geographies using different methods
associated with decreasing levels of precision in the order listed below.
Each method generates matched s2 cell identifiers differently
and is recorded in the match_method column of the returned tibble:
ref_addr: reference s2 cell from direct match to reference address
tiger_range: centroid of street-matched TIGER address ranges containing street number
tiger_street: centroid of street-matched TIGER address ranges closest to the street number
none: unmatched using all previous approaches; return missing s2 cell identifier

"><meta property="og:description" content="Addresses are attempted to be matched to reference geographies using different methods
associated with decreasing levels of precision in the order listed below.
Each method generates matched s2 cell identifiers differently
and is recorded in the match_method column of the returned tibble:
ref_addr: reference s2 cell from direct match to reference address
tiger_range: centroid of street-matched TIGER address ranges containing street number
tiger_street: centroid of street-matched TIGER address ranges closest to the street number
none: unmatched using all previous approaches; return missing s2 cell identifier

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">addr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/addr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/cole-brokamp/addr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Geocode addr vectors</h1>
      <small class="dont-index">Source: <a href="https://github.com/cole-brokamp/addr/blob/main/R/addr_geocode.R" class="external-link"><code>R/addr_geocode.R</code></a></small>
      <div class="d-none name"><code>addr_match_geocode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Addresses are attempted to be matched to reference geographies using different methods
associated with decreasing levels of precision in the order listed below.
Each method generates matched s2 cell identifiers differently
and is recorded in the <code>match_method</code> column of the returned tibble:</p><ol><li><p><code>ref_addr</code>: reference s2 cell from direct match to reference address</p></li>
<li><p><code>tiger_range</code>: centroid of street-matched TIGER address ranges containing street number</p></li>
<li><p><code>tiger_street</code>: centroid of street-matched TIGER address ranges closest to the street number</p></li>
<li><p><code>none</code>: unmatched using all previous approaches; return missing s2 cell identifier</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">addr_match_geocode</span><span class="op">(</span><span class="va">x</span>, <span class="va">ref_addr</span>, <span class="va">ref_s2</span>, county <span class="op">=</span> <span class="st">"39061"</span>, year <span class="op">=</span> <span class="st">"2022"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an addr vector (or character vector of address strings) to geocode</p></dd>


<dt id="arg-ref-addr">ref_addr<a class="anchor" aria-label="anchor" href="#arg-ref-addr"></a></dt>
<dd><p>an addr vector to search for matches in</p></dd>


<dt id="arg-ref-s-">ref_s2<a class="anchor" aria-label="anchor" href="#arg-ref-s-"></a></dt>
<dd><p>a s2_cell vector of locations for each ref_addr</p></dd>


<dt id="arg-county">county<a class="anchor" aria-label="anchor" href="#arg-county"></a></dt>
<dd><p>character county identifer for TIGER street range files to search for matches in</p></dd>


<dt id="arg-year">year<a class="anchor" aria-label="anchor" href="#arg-year"></a></dt>
<dd><p>character year for TIGER street range files to search for matches in</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble with columns: <code>addr</code> contains <code>x</code> converted to an <code>addr</code> vector,
<code>s2</code> contains the resulting geocoded s2 cells as an <code>s2cell</code> vector,
<code>match_method</code> is a factor with levels described above</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Performance was compared to the degauss geocoder (see <code>/inst/compare_geocoding_to_degauss.R</code>) using
real-world addresses in <code><a href="voter_addresses.html">voter_addresses()</a></code>.
Match success rates were similar, but DeGAUSS matched about 5% more of the addresses. These differences are
sensitive to the match criteria considered for DeGAUSS (here precision of 'range' &amp; score &gt; 0.7 <em>or</em>
precision of 'street' &amp; score &gt; 0.55):</p><table class="table table"><tr><td>addr_matched</td><td>degauss_matched</td><td>n</td><td>perc</td></tr><tr><td>TRUE</td><td>TRUE</td><td>224714</td><td>92.8%</td></tr><tr><td>FALSE</td><td>TRUE</td><td>13407</td><td>5.5%</td></tr><tr><td>FALSE</td><td>FALSE</td><td>2993</td><td>1.2%</td></tr><tr><td>TRUE</td><td>FALSE</td><td>1019</td><td>0.4%</td></tr></table><p>Among those that were geocoded by both, 97.7% were geocoded to the same census tract, and
96.6% to the same block group:</p><table class="table table"><tr><td>ct_agree</td><td>bg_agree</td><td>n</td><td>s2_dist_ptiles (5th, 25th, 50th, 75th, 95th)</td><td>perc</td></tr><tr><td>TRUE</td><td>TRUE</td><td>217179</td><td>14.7, 24.3, 39, 68.9, 153.6</td><td>96.6%</td></tr><tr><td>FALSE</td><td>FALSE</td><td>4805</td><td>21.6, 39.2, 158.9, 5577.9, 16998.8</td><td>2.1%</td></tr><tr><td>TRUE</td><td>FALSE</td><td>2730</td><td>19.6, 28.6, 41.2, 94.8, 571.8</td><td>1.2%</td></tr></table></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">addr_match_geocode</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="voter_addresses.html">voter_addresses</a></span><span class="op">(</span><span class="op">)</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   <span class="fu">codec</span><span class="fu">::</span><span class="fu"><a href="http://geomarker.io/codec/reference/cincy_addr_geo.html" class="external-link">cincy_addr_geo</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">cagis_address</span>,</span></span>
<span class="r-in"><span>                   ref_s2 <span class="op">=</span> <span class="fu">codec</span><span class="fu">::</span><span class="fu"><a href="http://geomarker.io/codec/reference/cincy_addr_geo.html" class="external-link">cincy_addr_geo</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">cagis_s2</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NAs introduced by coercion</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> matching addresses in 6/7 ZIP codes [2.4s elapsed] </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> matching addresses in 7/7 ZIP codes [2.5s elapsed] </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 10 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                            addr         s2 match_method</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                          <span style="color: #949494; font-style: italic;">&lt;addr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>            <span style="color: #BB00BB; font-weight: bold;">9475</span> <span style="color: #BB0000; text-decoration: underline;">Zola</span> <span style="color: #BB0000; font-weight: 100;">Court</span> <span style="color: #555555; text-decoration: underline;">Harrison</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45030</span> -<span style="color: #BB0000;">6.13</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>    <span style="color: #BB00BB; font-weight: bold;">6420</span> <span style="color: #BB0000; text-decoration: underline;">Fair Oaks</span> <span style="color: #BB0000; font-weight: 100;">Avenue</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45237</span> -<span style="color: #BB0000;">6.17</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>         <span style="color: #BB00BB; font-weight: bold;">12092</span> <span style="color: #BB0000; text-decoration: underline;">3rd</span> <span style="color: #BB0000; font-weight: 100;">Avenue</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45249</span> -<span style="color: #BB0000;">6.19</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>     <span style="color: #BB00BB; font-weight: bold;">9749</span> <span style="color: #BB0000; text-decoration: underline;">Culpepper</span> <span style="color: #BB0000; font-weight: 100;">Court</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45231</span> -<span style="color: #BB0000;">6.17</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>      <span style="color: #BB00BB; font-weight: bold;">7123</span> <span style="color: #BB0000; text-decoration: underline;">Eastlawn</span> <span style="color: #BB0000; font-weight: 100;">Drive</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45237</span> -<span style="color: #BB0000;">6.17</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> <span style="color: #BB00BB; font-weight: bold;">4320</span> <span style="color: #BB0000; text-decoration: underline;">Saint Dominic</span> <span style="color: #BB0000; font-weight: 100;">Drive</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45238</span> -<span style="color: #BB0000;">6.43</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>       <span style="color: #BB00BB; font-weight: bold;">234</span> <span style="color: #BB0000; text-decoration: underline;">Stetson</span> <span style="color: #BB0000; font-weight: 100;">Street</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45219</span> -<span style="color: #BB0000;">6.70</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>   <span style="color: #BB00BB; font-weight: bold;">1899</span> <span style="color: #BB0000; text-decoration: underline;">Langdon Farm</span> <span style="color: #BB0000; font-weight: 100;">Road</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45237</span> -<span style="color: #BB0000;">6.70</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>     <span style="color: #BB00BB; font-weight: bold;">2428</span> <span style="color: #BB0000; text-decoration: underline;">Fairview</span> <span style="color: #BB0000; font-weight: 100;">Avenue</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45219</span> -<span style="color: #BB0000;">6.70</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>       <span style="color: #BB00BB; font-weight: bold;">3684</span> <span style="color: #BB0000; text-decoration: underline;">Reemelin</span> <span style="color: #BB0000; font-weight: 100;">Road</span> <span style="color: #555555; text-decoration: underline;">Cincinnati</span> <span style="color: #555555; font-style: italic;">OH</span> <span style="color: #0000BB; text-decoration: underline;">45211</span> -<span style="color: #BB0000;">6.74</span><span style="color: #949494;">e</span><span style="color: #BB0000;">-269</span> ref_addr    </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cole Brokamp, Erika Manning.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

